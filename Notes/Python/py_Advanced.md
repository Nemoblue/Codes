# Python Advanced

## 列表（`list`）

- 列表是Python中的一个对象
    - 列表中可以保存多个有序的数据
    - 列表是用来存储对象的对象

- 创建列表，通过 `[]` 来创建列表
    ```
    my_list = [] # 创建了一个空列表
    my_list = [10] # 创建一个只包含一个元素的列表

    # 列表中可以保存任意对象
    my_list = [10,'hello',True,None,[1,2,3],print]
    ```

- 通过索引（`index`）来获取列表中的元素
    ```
    my_list = [10,20,30,40,50]

    # 如果使用的索引超过了最大的范围，会抛出异常
    print(my_list[5]) 
    IndexError: list index out of range
    ```

- 通过 `len()` 函数可以获取列表的长度
    ```
    # 获取到的长度的值，是列表的最大索引 + 1
    print(len(my_list)) # 5
    ```

- 通过 `while` 循环来遍历列表
    ```
    i = 0
    while i < len(stus):
        print(stus[i])
        i += 1
    ```

- 通过 `for` 循环来遍历列表
    ```
    for s in stus:
        print(s)
    ```
---

## 切片

- 切片指从现有列表中，获取一个子列表

- 列表的索引可以是负数。如果索引是负数，则从后向前获取元素，-1表示倒数第一个，-2表示倒数第二个 以此类推

    `print(stus[-2])`

- 语法：`列表[起始:结束]`
    - 通过切片获取元素时，会包括起始位置的元素，不会包括结束位置的元素
    - 做切片操作时，总会返回一个新的列表，不会影响原来的列表
    - 如果省略结束位置，则会一直截取到最后
    - 如果省略起始位置，则会从第一个元素开始截取
    - 如果起始位置和结束位置全部省略，则相当于创建了一个列表的副本
    ```
    my_list = [10,20,30,40,50]
    print(my_list[1:])  # [20, 30, 40, 50]
    print(my_list[:3])  # [10, 20, 30]
    print(my_list[:])   # [10, 20, 30, 40, 50]
    print(my_list)
    ```

- 语法：`列表[起始:结束:步长]`
    - 步长表示，每次获取元素的间隔，默认值是1

        `print(my_list[0:5:3])  # [10, 40]`
    - 步长不能是0，但是可以是负数

        `print(my_list[::0])`

        `ValueError: slice step cannot be zero`
    - 如果是负数，则会从列表的后部向前边取元素

        `print(my_list[::-1])  # [50, 40, 30, 20, 10]`

---

## 序列（`sequence`）

序列（`sequence`）是Python中最基本的一种数据结构，序列用于保存一组有序的数据，所有的数据在序列当中都有一个唯一的位置

- 可变序列（序列中的元素可以改变）：
    - 列表（`list`）(也是可变对象)
- 不可变序列（序列中的元素不能改变）：
    - 字符串（`str`）
    - 元组（`tuple`）

序列通用操作

- `+` 可以将两个列表拼接为一个列表

    `my_list = [1,2,3] + [4,5,6]`

- `*` 可以将列表重复指定的次数

    `my_list = [1,2,3] * 5`

    ---

- `in` 用来检查指定元素是否存在于列表中，如果存在，返回True，否则返回False

    `print(40 in my_list)`

- `not in` 用来检查指定元素是否不在列表中，如果不在，返回True，否则返回False

    `print(50 not in stus)`

    ---

- `len()` 获取列表中的元素的个数
- `min()` 获取列表中的最小值
- `max()` 获取列表中的最大值

    ```
    arr = [10,1,2,5,100,77]
    print(min(arr) , max(arr))
    ```

    ---

- `s.index()` 获取指定元素在列表中的**第一次**出现时索引

    `print(arr.index(100))`

    - `index()` 的第二个参数，表示查找的起始位置 ， 第三个参数，表示查找的结束位置

        `print(arr.index(100,3,7))`

    - 如果要获取列表中没有的元素，会抛出异常

        `print(arr.index(34))`

        `ValueError: 34 is not in list`

- `s.count()` 统计指定元素在列表中出现的次数

    `print(arr.count(100))  # 1`

---

## 修改列表（可变序列）

- 直接通过索引来修改元素

    `arr[0] = 5`

- 通过 `del` 来删除元素

    `del arr[2]`

- 通过切片来修改列表
    - 在给切片进行赋值时，只能使用序列
        ```
        arr[0:2] = [100, 200] # 使用新的元素替换旧元素
        arr[0:2] = [100, 200, 300] # 可用长序列替换短序列
        arr[0:0] = [88] # 向索引为0的位置插入元素
        ```
    - 当设置了步长时，序列中元素的个数必须和切片中元素的个数一致
        ```
        arr[::2] = [100, 200, 300]
        ```

- 通过切片来删除元素
    ```
    del arr[0:2]
    del arr[::2]
    arr[1:3] = []
    ```

- 以上操作只适用于**可变序列**，但可以通过 `list()` 函数将其他的序列转换为 `list`
    ```
    s = 'hello'
    s[1] = 'a' # 字符串属于不可变序列，无法通过索引来修改
    s = list(s)
    s[1] = 'a' # 此时可以修改
    ```

---

## 列表常用方法（可变序列）

- `append()` 向列表的最后添加一个元素

    `arr.append(400)`

- `insert()` 向列表的**指定位置**插入一个元素，原元素向后移动
    - 参数1：要插入的位置
    - 参数2：要插入的元素

        `arr.insert(2,'Alice')`

- `extend()` 使用新的序列来扩展当前序列
    - 需要一个序列作为参数，它会将该序列中的元素添加到当前列表中

        `arr.extend([500, 600])`

        `stus += [500, 00] # 效果相同`

- `clear()` 清空序列

    `arr.clear()`

- `pop()` 根据索引删除并**返回**被删除的元素

    `result = arr.pop(2) # 删除索引为2的元素`

    `result = arr.pop() # 删除最后一个`

- `remove()` 删除指定值的元素，如果相同值的元素有多个，只会删除第一个

    `arr.remove(100)`

- `reverse()` 用来反转列表

    `arr.reverse()` 

- `sort()` 用来对列表中的元素进行排序
    - 默认是升序排列，如果需要降序排列，则需要传递一个 `reverse=True` 作为参数

        ```
        my_list = [10,1,20,3,4,5,0,-2]
        my_list.sort(reverse = True)
        ```
    - 如果不想改变原列表且返回排好序的新列表，使用 `sorted()` 函数

        ```
        new_list = sorted(my_list)
        ```
    
    - 通过 `key` 参数传递定制方法
        ```
        # 使用第二个元素排序
        def takeSecond(elem):
            return elem[1]

        # 创建 random list
        random = [(2, 2), (3, 4), (4, 1), (1, 3)]

        # 使用 key 参数排序
        random.sort(key=takeSecond) # [(4, 1), (2, 2), (1, 3), (3, 4)]

        # 或者使用 lambda 方法作为参数排序
        random.sort(key=lambda x: x[1])
        ```
---

## 范围（`range`）

通过 `range()` 生成一个自然数的序列
- 参数1：起始位置（可以省略，默认是0）
- 参数2：结束位置
- 参数3：步长（可以省略，默认是1

    ```
    r = range(5)        # 生成一个这样的序列[0,1,2,3,4]
    r = range(0,10,2)   # [0, 2, 4, 6, 8]
    r = range(5,0,-1)   # [5, 4, 3, 2, 1]
    r = range(5,0,1)    # 空序列，相当于 range(5, 0)

    for i in range(30): # 创建一个执行指定次数的for循环
        print(i)
    ```

---